<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tenet 1 — GIVE A DAMN</title>
    <link rel="stylesheet" href="/css/styles.scss" />
    <style>
        .tenet-lab {
            position: fixed;
            left: 16px;
            bottom: 16px;
            z-index: 10001;
            width: min(420px, calc(100vw - 32px));
            border: 1px solid var(--color-foreground);
            border-radius: 16px;
            padding: 12px;
            background: rgb(var(--color-foreground-rgb) / 8%);
            backdrop-filter: blur(10px);
        }

        .tenet-lab__title {
            font-size: 14px;
            line-height: 1.2;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .tenet-lab__section {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgb(var(--color-foreground-rgb) / 18%);
        }

        .tenet-lab__section:first-of-type {
            margin-top: 0;
            padding-top: 0;
            border-top: none;
        }

        .tenet-lab__section-title {
            font-size: 11px;
            line-height: 1.2;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            opacity: 0.75;
            margin-bottom: 6px;
        }

        .tenet-lab__accordion {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgb(var(--color-foreground-rgb) / 18%);
        }

        .tenet-lab__accordion-title {
            list-style: none;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            font-size: 11px;
            line-height: 1.2;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            opacity: 0.75;
            margin-bottom: 6px;
        }

        .tenet-lab__accordion-title::-webkit-details-marker {
            display: none;
        }

        .tenet-lab__accordion-title::after {
            content: '▾';
            float: right;
            opacity: 0.8;
            transform: rotate(-90deg);
            transition: transform 140ms ease;
        }

        details[open] > .tenet-lab__accordion-title::after {
            transform: rotate(0deg);
        }

        .tenet-lab__row {
            display: grid;
            grid-template-columns: 110px 1fr;
            gap: 10px;
            align-items: center;
            padding: 6px 0;
            font-size: 12px;
            line-height: 1.2;
        }

        .tenet-lab__label {
            opacity: 0.9;
        }

        .tenet-lab__right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tenet-lab__value {
            font-variant-numeric: tabular-nums;
            opacity: 0.9;
            min-width: 56px;
            text-align: right;
        }

        .tenet-lab input[type="range"] {
            width: 100%;
        }

        .tenet-lab input[type="number"] {
            width: 100%;
            padding: 4px 6px;
            border-radius: 10px;
            border: 1px solid rgb(var(--color-foreground-rgb) / 18%);
            background: rgb(var(--color-foreground-rgb) / 6%);
            color: var(--color-foreground);
        }
    </style>
</head>
<body>
    <svg width="0" height="0" aria-hidden="true" focusable="false" style="position: absolute; left: -9999px; top: -9999px;">
        <filter id="tenet-grain" x="-20%" y="-20%" width="140%" height="140%">
            <!--
              Grainy blur texture (Figma-like): generate noise and composite it into the incoming
              graphic. In JS we apply CSS blur() first, then this filter, so the grain affects
              only the blurred output (and is set to 0 at the crisp midpoint).
            -->
            <!-- The incoming graphic is blurred via CSS (per-layer), so we can support per-layer blur differences. -->
            <feComposite in="SourceGraphic" in2="SourceGraphic" operator="over" result="src" />

            <!-- Noise source -->
            <feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" seed="2" result="noise" />
            <feColorMatrix in="noise" type="saturate" values="0" result="noiseMono" />

            <!-- Put noise luminance into alpha channel (0..1) -->
            <feColorMatrix
                in="noiseMono"
                type="matrix"
                values="
                    0 0 0 0 0
                    0 0 0 0 0
                    0 0 0 0 0
                    1 0 0 0 0
                "
                result="noiseAlpha"
            />

            <!-- Extract the blurred glyph alpha into its own image -->
            <feColorMatrix
                in="src"
                type="matrix"
                values="
                    0 0 0 0 0
                    0 0 0 0 0
                    0 0 0 0 0
                    0 0 0 1 0
                "
                result="blurAlpha"
            />

            <!-- Shape noise distribution (contrast knob); keep it as alpha -->
            <feComponentTransfer in="noiseAlpha" result="noiseShaped">
                <feFuncA id="tenet-grain-contrast-a" type="linear" slope="2" intercept="0" />
            </feComponentTransfer>

            <!-- Center noise around 0 (-0.5..0.5) so we can add it to blur alpha -->
            <feComponentTransfer in="noiseShaped" result="noiseCentered">
                <feFuncA type="linear" slope="1" intercept="-0.5" />
            </feComponentTransfer>

            <!-- Add noise into the blur alpha (dither). k3 is driven by the lab script. -->
            <feComposite
                id="tenet-grain-dither"
                in="blurAlpha"
                in2="noiseCentered"
                operator="arithmetic"
                k1="0"
                k2="1"
                k3="0"
                k4="0"
                result="alphaDithered"
            />

            <!-- Quantize alpha into multiple levels; noise makes it look stippled instead of banded -->
            <feComponentTransfer in="alphaDithered" result="alphaQuant">
                <!-- 8 levels -->
                <feFuncA type="discrete" tableValues="0 0.14 0.28 0.42 0.56 0.70 0.84 1" />
            </feComponentTransfer>

            <!-- Apply quantized alpha to the blurred graphic -->
            <feComposite in="src" in2="alphaQuant" operator="in" result="blurStippled" />

            <!-- Blend between smooth blur and stippled blur; k2/k3 driven by the lab script -->
            <feComposite id="tenet-grain-mix" in="src" in2="blurStippled" operator="arithmetic" k1="0" k2="1" k3="0" k4="0" />
        </filter>
    </svg>

    <div class="grain" aria-hidden="true"></div>
    <div class="grid-overlay" aria-hidden="true">
        <div class="grid-col"></div>
        <div class="grid-col"></div>
        <div class="grid-col"></div>
        <div class="grid-col"></div>
        <div class="grid-col"></div>
        <div class="grid-col"></div>
    </div>

    <main>
        <section class="split" id="core-tenets" aria-label="Core Tenets">
            <div class="split-content">
                <p class="section-label">Core Tenets — 1/3</p>
                <h2 class="tenet">GIVE A DAMN</h2>
            </div>
        </section>
    </main>

    <script type="module" src="/js/tenet-1-lab.js"></script>
</body>
</html>
